import{o as s,c as r,F as d,I as g,d as e,a as v,w as y,u as c,k as P,j as N,t as h,r as x,Q as p,D as C,n as q,f as _,J as T,s as j,Z as z}from"./app.CqJCRoH7.js";const A={class:"product-cards"},F={class:"type-card"},L={class:"type-thumb"},V=["src"],D={class:"type-caption"},E={class:"type-title"},I={__name:"TypeCard",setup(B){return(u,f)=>(s(),r("div",A,[(s(!0),r(d,null,g(u.$page.props.catalog,l=>(s(),r("div",F,[e("div",L,[v(c(P),{href:"/type/"+l.name},{default:y(()=>[e("img",{loading:"lazy",src:"/storage//src/row/type/"+l.name+".png",alt:""},null,8,V)]),_:2},1032,["href"])]),e("div",D,[e("div",E,[v(c(P),{href:"/type/"+l.name},{default:y(()=>[N(h(l.name__ru),1)]),_:2},1032,["href"])])])]))),256))]))}},J={key:0,class:"product-cards"},R=["onClick"],Q={class:"card-thumb"},Z=["src"],G={class:"card-caption"},H={class:"card-title"},K={class:"card-price"},M={key:0},U={key:1,class:"d-flex flex-row justify-content-between"},W=e("div",{class:"text-center w-100"},[e("h5",null,"Здесь ничего нет")],-1),X=[W],Y={__name:"TypeProduct",setup(B){return x(p().props.page),x(p().props.pageCount),window.location.pathname.split("?")[0],(u,f)=>u.$page.props.catalog.length>0?(s(),r("div",J,[(s(!0),r(d,null,g(u.$page.props.catalog,l=>(s(),r("div",{class:"product-card",onClick:w=>c(C).visit("/product/"+l.slug)},[e("div",Q,[v(c(P),{href:"/product/"+l.slug},{default:y(()=>[e("img",{loading:"lazy",src:l.img?"/storage/src/"+JSON.parse(l.img)[0]:"/storage/src/row/no-image.png"},null,8,Z)]),_:2},1032,["href"])]),e("div",G,[e("div",H,[v(c(P),{href:"/product/"+l.slug},{default:y(()=>[N(h(l.name),1)]),_:2},1032,["href"])]),e("div",K,[e("span",{class:q(l.old_price>0?"discount":"")},h(l.price),3),l.old_price>0?(s(),r("del",M,h(l.old_price)+" руб. ",1)):_("",!0)])])],8,R))),256))])):u.$page.props.catalog.length<=0?(s(),r("div",U,X)):_("",!0)}},ee={key:0,class:"w-25 me-5 row"},te={class:"p-0 m-0"},se={class:"filter_block"},re={class:"price"},le=e("h6",null,"Цена",-1),ae=["placeholder","value"],oe=["placeholder","value"],ie={key:1,class:"manufacturers"},ne=e("h6",null,"Производитель",-1),ce={class:"ps-1"},pe=["id","value","checked"],ue=e("span",{class:"ui-checkbox__box"},null,-1),de={key:0,class:"attributes_filter"},_e={class:"attributes_filter-title"},he={class:"ps-1"},fe=["name","id","value","checked"],me=e("span",{class:"ui-checkbox__box ui-checkbox__box_list"},null,-1),ve={__name:"catalog",setup(B){const u=(t,o)=>{if(route().params[t]&&route().params[t].toLowerCase().split("-").indexOf(o.toLowerCase())!=-1)return!0},f=x(null);let l;const w=()=>{f.value=null;let t="",o=$("#minPrice").val()==""||$("#minPrice").val()==0?0:$("#minPrice").val(),a=$("#maxPrice").val()==""||$("#maxPrice").val()==0?p().props.filter.AbsolutemaxPrice:$("#maxPrice").val();o>a&&([a,o]=[o,a]),$("#minPrice").val()!=""|$("#maxPrice").val()!=""&&(t=o+"-"+a);const i={};t&&(i.price=t),$('input[name="brand"]:checked').length>0&&(i.brand=$('input[name="brand"]:checked').map(function(){return $(this).val()}).get().join("-").toLowerCase());var n=$(".attributes_filter").map(function(){let m=$(this).find(".attributes_filter-title").text(),b=$(this).find("input:checked").map(function(){return $(this).val()}).get().join("-");if(m&&b){let k=[];return k=[m+"="+b],k}}).get();n.length>0&&n.forEach(m=>{const b=m.split("=")[0].replace(" ","_"),k=m.split("=")[1];i[b]=k}),C.put(route("type",{type:p().props.type,_query:i}))},O=()=>{C.put(route("type",p().props.type))},S=t=>{var o=document.querySelector(".filter_block"),a=o.getBoundingClientRect();let i;t.target.closest("li.d-flex").querySelector("input").checked!=!0?t.target.closest("li.d-flex").querySelector("input").checked=!0:t.target.closest("li.d-flex").querySelector("input").checked=!1;var n=t.target.closest("li.d-flex").querySelector("span").getBoundingClientRect();i=22,f.value=n.top-a.top-i,clearTimeout(l),l=setTimeout(()=>{f.value=null},5e3)};return(t,o)=>(s(),r(d,null,[v(c(z),null,{default:y(()=>[e("title",null,`
            `+h(t.$page.props.name)+`
        `,1)]),_:1}),e("div",{class:q(["catalogs",t.$page.props.filter?"d-flex":""])},[t.$page.props.filter?(s(),r("div",ee,[e("div",te,[e("div",se,[f.value?(s(),r("div",{key:0,onClick:w,class:"apply-filters-float-btn",style:T({top:f.value+"px"}),"data-label":"Показать"},null,4)):_("",!0),e("div",re,[le,e("input",{type:"number",name:"minPrice",id:"minPrice",class:"my-1 p-1 w-100",placeholder:"Минимальная Цена "+(Object.keys(t.route().params).length>=1?c(p)().props.filter.minPrice:c(p)().props.filter.AbsoluteminPrice),value:t.route().params.price&&t.route().params.price.split("-")[0]!=0?t.route().params.price.split("-")[0]:""},null,8,ae),e("input",{type:"number",name:"maxPrice",id:"maxPrice",class:"my-1 p-1 w-100",placeholder:"Максимальная Цена "+(Object.keys(t.route().params).length>=1?c(p)().props.filter.maxPrice:c(p)().props.filter.AbsolutemaxPrice),value:t.route().params.price&&t.route().params.price.split("-")[1]!=t.$page.props.filter.AbsolutemaxPrice?t.route().params.price.split("-")[1]:""},null,8,oe)]),t.$page.props.filter.manufacturers?(s(),r("div",ie,[ne,e("div",null,[e("ul",ce,[(s(!0),r(d,null,g(t.$page.props.filter.manufacturers,(a,i)=>(s(),r("li",{class:"d-flex",onClick:o[0]||(o[0]=n=>S(n))},[e("span",null,h(a.name),1),e("input",{type:"checkbox",class:"ui-checkbox__input",name:"brand",id:"brand-"+a.name,value:a.name,checked:u("brand",a.name)},null,8,pe),ue]))),256))])])])):_("",!0),(s(!0),r(d,null,g(t.$page.props.filter.attributes_filter,(a,i)=>(s(),r(d,null,[Object.keys(a).length>1?(s(),r("div",de,[e("h6",_e,h(i),1),e("div",null,[e("ul",he,[(s(!0),r(d,null,g(a,n=>(s(),r("li",{class:"d-flex",onClick:o[1]||(o[1]=m=>S(m))},[n?(s(),r(d,{key:0},[e("span",null,h(n),1),e("input",{type:"checkbox",class:"ui-checkbox__input",name:i,id:i.replace(" ","-"),value:n,checked:u(i.replace(" ","_"),n)},null,8,fe),me],64)):_("",!0)]))),256))])])])):_("",!0)],64))),256)),e("button",{type:"button",class:"btn btn-primary w-100",onClick:w},"Применить"),e("button",{type:"button",class:"btn btn-light w-100",onClick:O},"Сброс")])])])):_("",!0),e("div",{class:q(["row",t.$page.props.filter?"w-75":""])},[t.$page.props.request=="category"?(s(),j(I,{key:0})):t.$page.props.request=="type"?(s(),j(Y,{key:1})):_("",!0)],2)],2)],64))}};export{ve as default};

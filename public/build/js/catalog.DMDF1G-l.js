import{r as A,h as D,o as a,c as o,b as F,w as L,a as t,t as h,u as d,Z as O,y as N,j as u,Q as c,e as S,v as x,F as p,q as k,n as q,f as B,D as j}from"./app.BQx0zvW2.js";import{_ as z,a as E}from"./TypeProduct.vue_vue_type_style_index_0_lang.BtQ8PJeL.js";const R={key:0,class:"w-25 me-5 row"},T={class:"p-0 m-0"},I={class:"filter_block"},Q={class:"price"},Z=t("h6",null,"Цена",-1),G=["placeholder","value"],H=["placeholder","value"],J={key:1,class:"manufacturers"},K={class:"ps-1"},M=["id","value","checked"],U=t("span",{class:"ui-checkbox__box"},null,-1),W={key:0,class:"attributes_filter"},X=["onClick"],Y={class:"ps-1"},ee=["name","id","value","checked"],te=t("span",{class:"ui-checkbox__box ui-checkbox__box_list"},null,-1),ie={__name:"catalog",setup(le){const _=(e,s)=>{if(route().params[e]&&route().params[e].toLowerCase().split("-").indexOf(s.toLowerCase())!=-1)return!0},m=A(null);let y;const v=D({visibleSections:{}});function g(e){v.visibleSections[e]=!v.visibleSections[e]}function P(e){return!!v.visibleSections[e]}const w=()=>{m.value=null;let e="",s=$("#minPrice").val()==""||$("#minPrice").val()==0?0:$("#minPrice").val(),r=$("#maxPrice").val()==""||$("#maxPrice").val()==0?c().props.filter.AbsolutemaxPrice:$("#maxPrice").val();s>r&&([r,s]=[s,r]),$("#minPrice").val()!=""|$("#maxPrice").val()!=""&&(e=s+"-"+r);const l={};e&&(l.price=e),$('input[name="brand"]:checked').length>0&&(l.brand=$('input[name="brand"]:checked').map(function(){return $(this).val()}).get().join("-").toLowerCase());var i=$(".attributes_filter").map(function(){let n=$(this).find(".attributes_filter-title").text(),f=$(this).find("input:checked").map(function(){return $(this).val()}).get().join("-");if(n&&f){let b=[];return b=[n+"="+f],b}}).get();i.length>0&&i.forEach(n=>{const f=n.split("=")[0].replace(" ","_"),b=n.split("=")[1];l[f]=b}),j.put(route("type",{type:c().props.type,_query:l}))},V=()=>{j.put(route("type",c().props.type))},C=e=>{var s=document.querySelector(".filter_block"),r=s.getBoundingClientRect();let l;e.target.closest("li.d-flex").querySelector("input").checked!=!0?e.target.closest("li.d-flex").querySelector("input").checked=!0:e.target.closest("li.d-flex").querySelector("input").checked=!1;var i=e.target.closest("li.d-flex").querySelector("span").getBoundingClientRect();l=22,m.value=i.top-r.top-l,clearTimeout(y),y=setTimeout(()=>{m.value=null},5e3)};return(e,s)=>(a(),o(p,null,[F(d(O),null,{default:L(()=>[t("title",null,`
            `+h(e.$page.props.name)+`
        `,1)]),_:1}),t("div",{class:q(["catalogs",e.$page.props.filter?"d-flex":""])},[e.$page.props.filter?(a(),o("div",R,[t("div",T,[t("div",I,[m.value?(a(),o("div",{key:0,onClick:w,class:"apply-filters-float-btn",style:N({top:m.value+"px"}),"data-label":"Показать"},null,4)):u("",!0),t("div",Q,[Z,t("input",{type:"number",name:"minPrice",id:"minPrice",class:"my-1 p-1 w-100",placeholder:"Минимальная Цена "+(Object.keys(e.route().params).length>=1?d(c)().props.filter.minPrice:d(c)().props.filter.AbsoluteminPrice),value:e.route().params.price&&e.route().params.price.split("-")[0]!=0?e.route().params.price.split("-")[0]:""},null,8,G),t("input",{type:"number",name:"maxPrice",id:"maxPrice",class:"my-1 p-1 w-100",placeholder:"Максимальная Цена "+(Object.keys(e.route().params).length>=1?d(c)().props.filter.maxPrice:d(c)().props.filter.AbsolutemaxPrice),value:e.route().params.price&&e.route().params.price.split("-")[1]!=e.$page.props.filter.AbsolutemaxPrice?e.route().params.price.split("-")[1]:""},null,8,H)]),e.$page.props.filter.manufacturers?(a(),o("div",J,[t("h6",{onClick:s[0]||(s[0]=r=>g("manufacturers"))},"Производитель"),S(t("div",null,[t("ul",K,[(a(!0),o(p,null,k(e.$page.props.filter.manufacturers,(r,l)=>(a(),o("li",{key:l,class:"d-flex",onClick:s[1]||(s[1]=i=>C(i))},[t("span",null,h(r.name),1),t("input",{type:"checkbox",class:"ui-checkbox__input",name:"brand",id:"brand-"+r.name,value:r.name,checked:_("brand",r.name)},null,8,M),U]))),128))])],512),[[x,P("manufacturers")]])])):u("",!0),(a(!0),o(p,null,k(e.$page.props.filter.attributes_filter,(r,l)=>(a(),o(p,{key:l},[Object.keys(r).length>1?(a(),o("div",W,[t("h6",{class:"attributes_filter-title",onClick:i=>g(l)},h(l),9,X),S(t("div",null,[t("ul",Y,[(a(!0),o(p,null,k(r,i=>(a(),o("li",{key:i,class:"d-flex",onClick:s[2]||(s[2]=n=>C(n))},[i?(a(),o(p,{key:0},[t("span",null,h(i),1),t("input",{type:"checkbox",class:"ui-checkbox__input",name:l,id:l.replace(" ","-")+"-"+i,value:i,checked:_(l.replace(" ","_"),i)},null,8,ee),te],64)):u("",!0)]))),128))])],512),[[x,P(l)]])])):u("",!0)],64))),128)),t("button",{type:"button",class:"btn btn-primary w-100",onClick:w},"Применить"),t("button",{type:"button",class:"btn btn-light w-100",onClick:V},"Сброс")])])])):u("",!0),t("div",{class:q(["row",e.$page.props.filter?"w-75":""])},[e.$page.props.request=="category"?(a(),B(z,{key:0})):e.$page.props.request=="type"?(a(),B(E,{key:1})):u("",!0)],2)],2)],64))}};export{ie as default};

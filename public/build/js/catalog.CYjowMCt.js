import{r as B,h as A,o as r,c as o,b as D,w as L,a as t,t as b,u as m,Z as O,F as u,y as N,j as n,e as g,v as P,Q as p,q as C,f as j,D as F}from"./app.BQx0zvW2.js";import{_ as T,a as E}from"./TypeProduct.vue_vue_type_style_index_0_lang.BtQ8PJeL.js";const R={key:0,class:"row filtersTab"},z={class:"p-0 m-0"},I={class:"mb-3"},Q={class:"filter_block"},Z={class:"price"},G=["placeholder","value"],H=["placeholder","value"],J={key:1,class:"manufacturers"},K={class:"ps-1"},M=["id","value","checked"],U=t("span",{class:"ui-checkbox__box"},null,-1),W={key:0,class:"attributes_filter"},X=["onClick"],Y={class:"ps-1"},ee=["name","id","value","checked"],te=t("span",{class:"ui-checkbox__box ui-checkbox__box_list"},null,-1),le={class:"catalogs"},se={class:"row"},ie={key:0,class:"mb-3"},ne={__name:"catalog",setup(re){const w=(e,l)=>{if(route().params[e]&&route().params[e].toLowerCase().split("-").indexOf(l.toLowerCase())!=-1)return!0},d=B(null);let S;const k=A({visibleSections:{}}),h=B(!1);function _(e){k.visibleSections[e]=!k.visibleSections[e]}function y(e){return!!k.visibleSections[e]}const x=()=>{d.value=null;let e="",l=$("#minPrice").val()==""||$("#minPrice").val()==0?0:$("#minPrice").val(),s=$("#maxPrice").val()==""||$("#maxPrice").val()==0?p().props.filter.AbsolutemaxPrice:$("#maxPrice").val();l>s&&([s,l]=[l,s]),$("#minPrice").val()!=""|$("#maxPrice").val()!=""&&(e=l+"-"+s);const i={};e&&(i.price=e),$('input[name="brand"]:checked').length>0&&(i.brand=$('input[name="brand"]:checked').map(function(){return $(this).val()}).get().join("-").toLowerCase());var a=$(".attributes_filter").map(function(){let c=$(this).find(".attributes_filter-title").text(),f=$(this).find("input:checked").map(function(){return $(this).val()}).get().join("-");if(c&&f){let v=[];return v=[c+"="+f],v}}).get();a.length>0&&a.forEach(c=>{const f=c.split("=")[0].replace(" ","_"),v=c.split("=")[1];i[f]=v}),F.put(route("type",{type:p().props.type,_query:i}))},V=()=>{F.put(route("type",p().props.type))},q=e=>{var l=document.querySelector(".filter_block"),s=l.getBoundingClientRect();let i;e.target.closest("li.d-flex").querySelector("input").checked!=!0?e.target.closest("li.d-flex").querySelector("input").checked=!0:e.target.closest("li.d-flex").querySelector("input").checked=!1;var a=e.target.closest("li.d-flex").querySelector("span").getBoundingClientRect();i=22,d.value=a.top-s.top-i,clearTimeout(S),S=setTimeout(()=>{d.value=null},5e3)};return(e,l)=>(r(),o(u,null,[D(m(O),null,{default:L(()=>[t("title",null,`
            `+b(e.$page.props.name)+`
        `,1)]),_:1}),e.$page.props.filter?(r(),o(u,{key:0},[h.value?(r(),o("div",R,[t("div",z,[t("div",I,[t("span",{onClick:l[0]||(l[0]=s=>h.value=!1)},"Закрыть фильтры")]),t("div",Q,[d.value?(r(),o("div",{key:0,onClick:x,class:"apply-filters-float-btn",style:N({top:d.value+"px"}),"data-label":"Показать"},null,4)):n("",!0),t("div",Z,[t("h6",{onClick:l[1]||(l[1]=s=>_("price"))},"Цена"),g(t("div",null,[t("input",{type:"number",name:"minPrice",id:"minPrice",class:"my-1 p-1 w-100",placeholder:"Минимальная Цена "+(Object.keys(e.route().params).length>=1?m(p)().props.filter.minPrice:m(p)().props.filter.AbsoluteminPrice),value:e.route().params.price&&e.route().params.price.split("-")[0]!=0?e.route().params.price.split("-")[0]:""},null,8,G),t("input",{type:"number",name:"maxPrice",id:"maxPrice",class:"my-1 p-1 w-100",placeholder:"Максимальная Цена "+(Object.keys(e.route().params).length>=1?m(p)().props.filter.maxPrice:m(p)().props.filter.AbsolutemaxPrice),value:e.route().params.price&&e.route().params.price.split("-")[1]!=e.$page.props.filter.AbsolutemaxPrice?e.route().params.price.split("-")[1]:""},null,8,H)],512),[[P,y("price")]])]),e.$page.props.filter.manufacturers?(r(),o("div",J,[t("h6",{onClick:l[2]||(l[2]=s=>_("manufacturers"))},"Производитель"),g(t("div",null,[t("ul",K,[(r(!0),o(u,null,C(e.$page.props.filter.manufacturers,(s,i)=>(r(),o("li",{key:i,class:"d-flex",onClick:l[3]||(l[3]=a=>q(a))},[t("span",null,b(s.name),1),t("input",{type:"checkbox",class:"ui-checkbox__input",name:"brand",id:"brand-"+s.name,value:s.name,checked:w("brand",s.name)},null,8,M),U]))),128))])],512),[[P,y("manufacturers")]])])):n("",!0),(r(!0),o(u,null,C(e.$page.props.filter.attributes_filter,(s,i)=>(r(),o(u,{key:i},[Object.keys(s).length>1?(r(),o("div",W,[t("h6",{class:"attributes_filter-title",onClick:a=>_(i)},b(i),9,X),g(t("div",null,[t("ul",Y,[(r(!0),o(u,null,C(s,a=>(r(),o("li",{key:a,class:"d-flex",onClick:l[4]||(l[4]=c=>q(c))},[a?(r(),o(u,{key:0},[t("span",null,b(a),1),t("input",{type:"checkbox",class:"ui-checkbox__input",name:i,id:i.replace(" ","-")+"-"+a,value:a,checked:w(i.replace(" ","_"),a)},null,8,ee),te],64)):n("",!0)]))),128))])],512),[[P,y(i)]])])):n("",!0)],64))),128)),t("button",{type:"button",class:"btn btn-primary w-100",onClick:x},"Применить"),t("button",{type:"button",class:"btn btn-light w-100",onClick:V},"Сброс")])])])):n("",!0)],64)):n("",!0),t("div",le,[t("div",se,[e.$page.props.filter?(r(),o("div",ie,[t("span",{onClick:l[5]||(l[5]=s=>h.value=!0)},"Показать фильтры")])):n("",!0),e.$page.props.request=="category"?(r(),j(T,{key:1})):e.$page.props.request=="type"?(r(),j(E,{key:2})):n("",!0)])])],64))}};export{ne as default};

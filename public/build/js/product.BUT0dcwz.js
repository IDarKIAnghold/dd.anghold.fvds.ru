import{r as m,Q as k,C as V,x as f,o as e,c as o,d as s,t as a,F as l,I as b,f as v,j as D,a as w,w as T,u as y,k as B,n as h,s as j,g as F,v as S,D as O,Z as R}from"./app.CqJCRoH7.js";const z={class:"product-card-title"},J={class:"row product-card-top-full"},L={class:"product-card-top-right"},M={class:"product-images-gallery__images"},P={key:0,style:{display:"grid","grid-template-columns":"1f"}},A=["src"],E={class:"product-card-top__images"},Q=["src"],Y={class:"product-card-top-left"},Z={class:"product-card-top__specs"},q={class:"product-card-top__specs__content"},x=s("div",{class:"product-card-top__specs__manufacturer"},[s("img",{src:"",alt:""})],-1),G={class:"product-card-top__stat"},H=s("span",{class:"ui-checkbox"},[s("span",{class:"ui-checkbox__box"}),s("span",null,"Сравнить"),s("input",{type:"checkbox",name:"",id:"",class:"ui-checkbox__input"})],-1),K={class:"star-rating"},U={class:"product-card-top__buy"},W={key:0,class:"product-buy product-buy_one-line"},X={class:"product-buy__price-wrap"},ss={class:"product-buy__price"},ts={key:0,class:"product-buy__prev"},es={key:1,class:"button-ui buy-btn btn"},os={key:1,class:"product-buy product-buy_one-line product-buy_one-line__load"},is=s("div",null,null,-1),as={__name:"ProductCardTop",setup(N){const r=m(!1),u=m(!1),n=m(!1),C=k().props.product.reviews_avg_grade,p=new FormData;p.append("product_id",k().props.product.id);const c=t=>{$(".product-images-slider__img").attr("src",t.target.src)},_=()=>{f.post(route("addToCart"),p).then(function(t){u.value=!0})},i=()=>{n.value==!0?f.post(route("removeFromFavorite"),p).then(function(t){n.value=!1}):f.post(route("addToFavorite"),p).then(function(t){n.value=!0})};return V(()=>{let t=f.post(route("checkCart"),p).then(function(d){d.data.message=="isset"&&(u.value=!0)});f.post(route("checkFavorite"),p).then(function(d){d.data.message=="isset"&&(n.value=!0)})&&t&&(r.value=!0)}),(t,g)=>(e(),o(l,null,[s("h1",z,a(t.$page.props.product.name),1),s("div",J,[s("div",L,[s("div",M,[t.$page.props.product.img?(e(),o("ul",P,[(e(!0),o(l,null,b(JSON.parse(t.$page.props.product.img),(d,I)=>(e(),o("li",{class:"product-images-gallery__pic mb-2",key:I,onClick:c},[s("img",{loading:"lazy",src:"/storage/src/"+d,class:"product-images-gallery__img",alt:""},null,8,A)]))),128))])):v("",!0)]),s("div",E,[s("img",{loading:"lazy",src:t.$page.props.product.img?"/storage/src/"+JSON.parse(t.$page.props.product.img)[0]:"/storage/src/row/no-image.png",class:"product-images-slider__img",alt:""},null,8,Q)])]),s("div",Y,[s("div",Z,[s("div",q,[D(a(t.$page.props.product.content)+" ",1),w(y(B),{href:"/product/"+t.$page.props.product.slug+"/Characteristic"},{default:T(()=>[D("Подробнее")]),_:1},8,["href"])]),x]),s("div",G,[H,s("div",K,[(e(),o(l,null,b(5,d=>s("span",{key:d,class:h({filled:d<=y(C)})},"★",2)),64))])]),s("div",U,[r.value?(e(),o("div",W,[s("div",X,[s("div",ss,[s("span",{class:h(t.$page.props.product.discount>0?"discount":"")},a((1-t.$page.props.product.discount/100)*t.$page.props.product.price),3),t.$page.props.product.discount>0?(e(),o("span",ts,a(t.$page.props.product.price),1)):v("",!0)])]),s("button",{class:"button-ui wishlist-btn",onClick:g[0]||(g[0]=d=>i())},[s("i",{class:h([n.value?"fa-solid":"fa-regular","fa-heart"])},null,2)]),t.$page.props.product.count>0?(e(),o(l,{key:0},[u.value?(e(),j(y(B),{key:0,href:t.route("cart"),class:"button-ui buy-btn btn",style:{}},{default:T(()=>[D(" В корзину ")]),_:1},8,["href"])):(e(),o("button",{key:1,onClick:_,class:"button-ui buy-btn btn btn-primary"}," Купить "))],64)):(e(),o("button",es," Уведомить "))])):(e(),o("div",os))]),is])])],64))}},cs={class:"product-card-tabs__list"},rs={class:"product-card-tabs__contents"},ns={class:"product-card-description",id:"Description"},ds=s("h3",{class:"product-card-description__title"}," Описание ",-1),ls={class:"product-card-characteristic",id:"Characteristic"},ps=s("h3",{class:"product-card-characteristic__title"}," Характеристика ",-1),_s=s("span",null," Тип ",-1),us=s("span",null," Производитель ",-1),hs={key:0},vs={class:"product-card-reviews",id:"Reviews"},gs={class:"d-flex justify-content-between mb-3 pb-2 ow-opinions__item"},fs=s("div",null,[s("h3",{class:"product-card-reviews__title"}," Отзывы ")],-1),ms={class:"ow-opinion ow-opinions__item"},bs={class:"ow-opinion__header"},$s={class:"ow-opinion__header-top"},ws={class:"ow-opinion__header-left"},ys={class:"profile-info"},ks={class:"profile-info__user"},Cs={class:"profile-info__avatar-wrapper"},Ds={class:"profile-info__avatar-wrapper"},Fs={class:"profile-info__avatar"},Ss=["src"],Ts={class:"profile-info__user-data"},Ns={class:"profile-info__name"},Bs={class:"profile-info__activity"},Is={class:"ow-opinion__date-site"},Vs={class:"ow-opinion__header-right"},js={class:"ow-opinion__date-site"},Os={class:"star-rating"},Rs={class:"ow-opinion__texts"},zs=s("div",{class:"ow-opinion__text-title"},"Достоинства",-1),Js={class:"ow-opinion__text-desc"},Ls={class:"ow-opinion__texts"},Ms=s("div",{class:"ow-opinion__text-title"},"Недостатки",-1),Ps={class:"ow-opinion__text-desc"},As={key:0,class:"ow-opinion__texts"},Es=s("div",{class:"ow-opinion__text-title"},"Комментарий",-1),Qs={class:"ow-opinion__text-desc"},Ys={key:1},Zs=s("h5",null,"Отзывы отсутствуют",-1),qs=[Zs],xs=s("p",null,null,-1),Gs={__name:"ProductCardBottom",setup(N){const r=m(k().props.states),u=m(null),n=c=>{const _=c.currentTarget.getAttribute("id");r.value=_};switch(k().props.states.toLowerCase()){case"description":case"reviews":case"characteristic":setTimeout(()=>{u.value.scrollIntoView({behavior:"smooth"})},100);break;default:r.value="Description";break}const C=()=>{O.visit("/reviews/"+route().params.slug)},p=function(c){const _=new Date(c),i=_.getDate().toString().padStart(2,"0"),t=(_.getMonth()+1).toString().padStart(2,"0"),g=_.getFullYear();return`${i}.${t}.${g}`};return(c,_)=>(e(),o("div",{class:"row product-card-bottom-full",ref_key:"descriptionSection",ref:u},[s("ul",cs,[s("li",{onClick:n,id:"Description",class:h({active:r.value=="Description"})}," Описание ",2),s("li",{onClick:n,id:"Characteristic",class:h({active:r.value=="Characteristic"})}," Характеристика ",2),s("li",{onClick:n,id:"Reviews",class:h({active:r.value=="Reviews"})}," Отзывы ",2)]),s("div",rs,[F(s("div",ns,[ds,s("div",null,a(c.$page.props.product.description),1)],512),[[S,r.value=="Description"]]),F(s("div",ls,[ps,s("div",null,[_s,s("span",null,a(c.$page.props.product.type.name__ru),1)]),s("div",null,[us,s("span",null,a(c.$page.props.product.manufacturer.name),1)]),(e(!0),o(l,null,b(c.$page.props.product.product_attributes,i=>(e(),o(l,null,[i.value?(e(),o("div",hs,[s("span",null,a(i.attributes.name),1),s("span",null,a(i.value),1)])):v("",!0)],64))),256))],512),[[S,r.value=="Characteristic"]]),F(s("div",vs,[s("div",gs,[fs,s("div",null,[c.$page.props.user?(e(),o("button",{key:0,class:"btn btn-primary",onClick:C}," Оставить отзыв ")):v("",!0)])]),Object.keys(c.$page.props.product.reviews).length>0?(e(!0),o(l,{key:0},b(c.$page.props.product.reviews,i=>(e(),o("div",ms,[s("div",bs,[s("div",$s,[s("div",ws,[s("div",ys,[s("div",ks,[s("div",Cs,[s("div",Ds,[s("div",Fs,[s("img",{alt:"",class:"loaded",src:"/storage/src/profile/"+i.user.img},null,8,Ss)])])]),s("div",Ts,[s("div",Ns,a(i.user.nickname?i.user.nickname:i.user.first_name+" "+i.user.last_name),1)])])]),s("div",Bs,[s("div",Is,[s("span",null,a(p(i.created_at)),1)])])]),s("div",Vs,[s("div",js,[s("div",Os,[(e(),o(l,null,b(5,t=>s("span",{key:t,class:h({filled:t<=i.grade})},"★",2)),64))])])])])]),s("div",Rs,[zs,s("div",Js,[s("p",null,a(i.plus),1)])]),s("div",Ls,[Ms,s("div",Ps,[s("p",null,a(i.minus),1)])]),i.comment?(e(),o("div",As,[Es,s("div",Qs,[s("p",null,a(i.comment),1)])])):v("",!0)]))),256)):Object.keys(c.$page.props.product.reviews).length<=0?(e(),o("div",Ys,qs)):v("",!0)],512),[[S,r.value=="Reviews"]])]),xs],512))}},Ks={__name:"product",setup(N){return(r,u)=>(e(),o(l,null,[w(y(R),null,{default:T(()=>[s("title",null,`
            Характеристика
            `+a(r.$page.props.product.name)+`
        `,1)]),_:1}),w(as),w(Gs)],64))}};export{Ks as default};
